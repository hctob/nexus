<html>
    <body onload="displayList()">
          <div class="container">
            <label for="username"><b>Friends List:</b></label>
            <p>{{.Friend}}</p>
          </div>
        <script>
            function getUsername(){
              var theCookies = document.cookie.split(';');
              var u_name = null;
              for(var i = 0; i < theCookies.length; i++){
                var temp = theCookies[i].substring(0,theCookies[i].length).split("=");
                if(temp[0].substring(0, temp[0].length) == "Username"){
                  u_name = temp[1];
                }
              }
              console.log(u_name);
              return u_name;
            }

            function displayList() {
                let result = document.querySelector('.result');
                let xhr = new XMLHttpRequest();
                let url = "/friends_list.html";
                xhr.open("POST", url, true);
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function(){
                  if(xhr.readyState == 4 && xhr.status == 200){
                    //result.innerHTML = this.responseText;
                  }
                }
                var data = JSON.stringify({"Username": getUsername()});
                console.log(data);
                xhr.send(data);
            }
        </script>
    </body>
</html>
