<html>
    <body onload="query()">
          <div class="container">
            <label for="username"><b>Friends List:</b></label>
            <p>{{.Friend}}</p>
          </div>
        <script>
            function displayList(){
                            var theCookies = document.cookie.split(';');
                          var status = null;
                          for(var i = 0; i < theCookies.length; i++){
                            var temp = theCookies[i].substring(0,theCookies[i].length).split("=");
                            console.log(temp[0]);
                            console.log(temp[1]);
                            if(temp[0].substring(1, temp[0].length) == "Friends_list"){
                              //friends are separated by a "^"
                      var friends = temp[1].split("^")
                      for(var j = 0; j < friends.length; j++){
                          //each property is split by "-"
                          var friend_properties = friends[j].split("-");
                          //friend_properties[0] would be the first property for friend j
                          //we can display the properties here for each friend
                      }
                           }
              }
            }

            function getUsername(){
              var theCookies = document.cookie.split(';');
              var u_name = null;
              for(var i = 0; i < theCookies.length; i++){
                var temp = theCookies[i].substring(0,theCookies[i].length).split("=");
                if(temp[0].substring(0, temp[0].length).trim() == "Username"){
                  u_name = temp[1].trim();
                }
              }
              console.log(u_name);
              return u_name;
            }
            function query() {
                let result = document.querySelector('.result');
                let xhr = new XMLHttpRequest();
                let url = "/friends-list";
                xhr.open("POST", url, true);
                xhr.setRequestHeader("Content-Type", "application/json");
                xhr.onreadystatechange = function(){
                  if(xhr.readyState == 4 && xhr.status == 200){
                    //result.innerHTML = this.responseText;
                  }
                }
                var data = JSON.stringify({"Username": getUsername()});
                console.log(data);
                xhr.send(data);
            }
        </script>
    </body>
</html>
